# Reddit記事の選出ルール

このBotがBlueskyに投稿するReddit記事を選出する際のルールをまとめます。

## 1. 取得元の設定
- **対象サブレディット**: `wrangler.toml` の `REDDIT_SUBREDDITS` で指定されたサブレディットから取得します。
- **取得タイプ**: 各サブレディットの「Hot」（人気）セクションから最新の投稿を取得します。
- **取得件数**: 一度のリクエストで最大50件の投稿を取得します。

## 2. フィルタリング条件
取得した投稿のうち、以下の条件をすべて満たすものが候補（Candidates）となります。

- **スコア（Score）**: `wrangler.toml` の `MIN_REDDIT_SCORE`（デフォルト: 100）以上のスコアを持っていること。
- **上位10件制限**: フィードの結果のうち、**上位10件**に入っている投稿のみを対象とします。
- **重複チェック**: すでにDB（Cloudflare D1）に保存されている（＝過去に投稿された）記事ではないこと。
  - ※デバッグモード（`DEBUG_MODE=true`）の場合はこのチェックをスキップします。
- **コンテンツ内容**: タイトルが10文字以上であること。

## 3. 最終選出
- **ランダム選出**: 上記の条件をクリアした候補の中から、**ランダムに1つ**を選びます。
- **フォールバック**: 条件を満たす投稿が1つも見つからなかった場合、その回の実行はスキップされます。

## 関連ファイル
- [src/reddit/fetcher.ts](file:///home/grimoire/repo/reddit-reader/src/reddit/fetcher.ts): 選出ロジックの本体
- [wrangler.toml](file:///home/grimoire/repo/reddit-reader/wrangler.toml): スコアやサブレディットの設定
